<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: accessSheet.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: accessSheet.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>/*jshint esversion: 11, laxcomma:true, eqeqeq:true*/
/*jshint -W014,-W084,-W030,-W033*/
//Sheet Updaters and styling functions
/**
 * An object to store your update functions in. Functions should be index by the version they are for (e.g. the update handler for version 1.01 would be indexed to '1.01'). These update functions will be iterated through based on the previous version of the sheet (as stored in the `sheet_version` attribute of the sheet) and the new version of the sheet (as stored in {@link k.version}).
 * @type {object}
 */
const updateHandlers = {};
kFuncs.updateHandlers = updateHandlers;
const updateSheet = function(){
  log('updating sheet');
  getAllAttrs({props:['sheet_version','debug_mode','collapsed',...baseGet],callback:(attributes,sections,casc)=>{
    kFuncs.debugMode = !!attributes.debug_mode;
    if(!attributes.sheet_version){
      initialSetup(attributes,sections);
    }else{
      Object.entries(updateHandlers).forEach(([ver,handler])=>{
        if(attributes.version &lt; +ver){
          handler({attributes,sections,casc});
        }
      });
    }
    attributes.sheet_version = kFuncs.version;
    log(`Sheet Update applied. Current Sheet Version ${kFuncs.version}`);
    //styleOnOpen(attributes,sections);
    //setActionCalls({attributes,sections});
    attributes.set();
    log('Sheet ready for use');
  }});
};

const initialSetup = function(attributes,sections){
  debug('Initial sheet setup');
};

/**
 * This is the default listener function for attributes that the K-Scaffold uses. It utilizes the `triggerFuncs`, `listenerFunc`, `calculation`, and `affects` properties of the K-scaffold trigger object (see the Pug section of the scaffold for more details).
 * @param {Roll20Event} event
 * @returns {void}
 */
const accessSheet = function(event){
  debug({funcs});
  debug({event});
  getAllAttrs({event,callback:(attributes,sections,casc)=>{
    let trigger = attributes.getCascObj(event,casc);
    attributes.processChange({event,trigger,attributes,sections,casc});
  }});
};
funcs.accessSheet = accessSheet;</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Global</h3><ul><li><a href="global.html#accessSheet">accessSheet</a></li><li><a href="global.html#callFunc">callFunc</a></li><li><a href="global.html#capitalize">capitalize</a></li><li><a href="global.html#commaArray">commaArray</a></li><li><a href="global.html#debug">debug</a></li><li><a href="global.html#debugMode">debugMode</a></li><li><a href="global.html#extractQueryResult">extractQueryResult</a></li><li><a href="global.html#generateRowID">generateRowID</a></li><li><a href="global.html#getAllAttrs">getAllAttrs</a></li><li><a href="global.html#getAttrs">getAttrs</a></li><li><a href="global.html#getSections">getSections</a></li><li><a href="global.html#log">log</a></li><li><a href="global.html#orderSection">orderSection</a></li><li><a href="global.html#orderSections">orderSections</a></li><li><a href="global.html#parseHTMLName">parseHTMLName</a></li><li><a href="global.html#parseRepeatName">parseRepeatName</a></li><li><a href="global.html#parseTriggerName">parseTriggerName</a></li><li><a href="global.html#pseudoQuery">pseudoQuery</a></li><li><a href="global.html#registerFuncs">registerFuncs</a></li><li><a href="global.html#removeRepeatingRow">removeRepeatingRow</a></li><li><a href="global.html#sanitizeForRegex">sanitizeForRegex</a></li><li><a href="global.html#setAttrs">setAttrs</a></li><li><a href="global.html#setSectionOrder">setSectionOrder</a></li><li><a href="global.html#sheetName">sheetName</a></li><li><a href="global.html#updateHandlers">updateHandlers</a></li><li><a href="global.html#value">value</a></li><li><a href="global.html#version">version</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 3.6.7</a> on Tue Jan 25 2022 10:33:29 GMT-0700 (Mountain Standard Time)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
